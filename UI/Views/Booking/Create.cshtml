@model DAL.Models.DailyDetectionViewModel
@{
    Layout = null;
}
@*@inject BLL.Services.DepartmentServices.IDepartmentSevice Dep*@
@inject BLL.Services.DepartmentServices.IDepartmentSevice Dep
@inject BLL.Services.ReservationServices.IReservationServices Serv
<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="images/favicon.ico" type="image/ico" />

    <title>HCR | booking patient</title>

    <!-- Font Awesome -->
    <link href="../../vendors/fontawesome-free-6.0.0-web/css/all.css" rel="stylesheet" />
    <!-- Bootstrap -->
    <link href="../../vendors/bootstrap/dist/css/bootstrap.css" rel="stylesheet" />
    <!-- Custom Theme Style -->
    <link href="../../dist/css/en/main.css" rel="stylesheet" />
    <!-- <link href="../../dist/scss/ar/ar-main.css" rel="stylesheet" /> -->
</head>

<body class="bg-white">
    <div class="row  add-patient m-0">
        <div class="col-12 col-md-6 mt-5 ps-5">
            <h1 class="mt-5">Booking Now</h1>
            <form asp-action="Create" asp-controller="Booking" class="mt-5 mb-2">
                <div class="row clearfix">
                    <!-- First Name -->
                    <div class="col-sm-6 mb-3 mt-3">
                        <div class="form-floating">
                            <input id="name" type="text" class="form-control" value="@ViewBag.name" placeholder="First Name" required />
                            <label for="floatingInput">Name</label>
                        </div>
                    </div>
                    <div class="col-sm-6 mb-3 mt-3">
                        <div class="form-floating">
                            <input id="ssn" type="number" value="@ViewBag.ssn" class="form-control" placeholder="National Number" maxlength="14" required />
                            <label for="NationalNumber">National Number</label>
                        </div>
                    </div>
                    <!-- Last Name -->
                    @*<div class="col-sm-6 mb-3 mt-3">
                <div class="form-floating">
                    <input type="text" class="form-control" placeholder="Last Name" required />
                    <label for="floatingInput">Last Name</label>
                </div>
            </div>*@
                </div>
                <div class="row clearfix">
                    <!-- doctor -->
                    <div class="col-sm-6 mb-3 mt-3">
                        <div class="form-floating">
                            @*<input class="form-control form-control show-tick" list="doctor" id="exampleDataList" placeholder="doctor">*@
                            <select class="form-select" asp-for="DoctorId" id="DocId">
                                <option>- Doctors -</option>
                            </select>
                            <label for="floatingInput">- doctor -</label>
                        </div>
                    </div>
                    <!-- Phone -->
                    <div class="col-sm-6 mb-3 mt-3">
                        <div class="form-floating">
                            <input id="phone" type="number" value="@ViewBag.phone" class="form-control" placeholder="Phone" maxlength="11" required />
                            <label for="Phone">Phone</label>
                        </div>
                    </div>
                </div>
                <!--<div class="row clearfix">-->
                <!--User name  -->
                <!--<div class="col-sm-6 mb-3 mt-3">
        <div class="form-floating">
            <input type="text" class="form-control" placeholder="User name" required />
            <label for="floatingInput">User name</label>
        </div>
    </div>-->
                <!--Email  -->
                <!--<div class="col-sm-6 mb-3 mt-3">
            <div class="form-floating">
                <input type="email" class="form-control" placeholder="Enter Your Emai" required />
                <label for="floatingInput">Enter Your Email</label>
            </div>
        </div>
    </div>-->
                <div class="row clearfix">
                    <!--type  -->
                    @*<div class="col-sm-6 mb-3 mt-3">
                <div class="form-floating">
                    <input class="form-control form-control show-tick" list="type booking" id="exampleDataList" placeholder="type booking">
                    <datalist id="type booking">
                        <option value="">- type booking -</option>
                        <option value="A medical">A medical</option>
                        <option value="Treatment">Treatment</option>
                        <option value="Surgery">Surgery</option>
                        <option value="X-ray work">X-ray work</option>
                        <option value="Emergency">Emergency</option>
                    </datalist>
                    <label for="floatingInput">- type booking -</label>
                </div>
            </div>*@
                    <!--department  -->

                </div>

                <div class="row clearfix">

                    <div class="col-sm-12 mb-3 mt-3">
                        <div class="form-floating col-sm-6">
                            <select asp-for="DepartmentId" class="form-select" id="datalistOptions">
                                <option value="">- Departments -</option>
                                @foreach (var item in Dep.GetAll())
                                {
                                    <option value="@item.DepartmentId">@item.Name</option>
                                }

                            </select>
                            <label for="floatingInput">- Departments -</label>
                        </div>

                        <div class="form-floating col-sm-6">
                            <select  asp-for="DateAndTime" class="form-select" id="getShift">
                                <option value="">- Shifts -</option>
                                @foreach (var item in Serv.GetAllShifts())
                                {
                                    <option value="@item.Id">@item.StartShift - @item.EndShift</option>
                                }

                            </select>
                            <label for="floatingInput">- Shifts -</label>
                        </div>
                    </div>
                </div>

                <div class="row clearfix">
                    <!--date  -->
                    <div class="col-sm-6 mb-3 mt-3">
                        <div class="form-floating">
                            <input type="date" data-provide="datepicker" data-date-autoclose="true" class="form-control" placeholder="Date" required />
                            <label for="floatingInput">Date</label>
                        </div>
                    </div>
                    <!--time  -->
                    <div class="col-sm-6 mb-3 mt-3">
                        <div class="form-floating">
                            <input asp-for="DateAndTime" type="time" data-provide="datepicker" data-date-autoclose="true" class="form-control" placeholder="time" required />
                            <label for="time">time</label>
                        </div>
                    </div>
                </div>
              
                <div class="mt-3">
                    <div class="form-group mb-4 pt-2">
                        <button type="submit" class="btn btn-lg ">booking</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="col-12 col-md-6 bg-patient p-0 border-0 rounded">
        </div>
    </div>
    <!-- js -->
    <!-- Bootstrap -->
    <!-- <script src="../../vendors/bootstrap/dist/js/bootstrap.min.js "></script> -->
    <!-- Custom Theme Scripts -->
    <script src="~/jquery/jquery.min.js"></script>
    <!-- <script src="../../dist/js/custom.js "></script> -->
    @*<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>*@


    <script>
        $(document).ready(function () {
            $.ajax({

                type: "POST",
                url: "/Booking/GetPatintData",
                data: { DeptId: DeptId },

                success: function (res) {
                    alert("aaaaaaaaaaaaaa")
                    $("#name").val(res.name);
                    $("#ssn").val(res.ssn);
                    $("#phone").val(res.phone);

                }

            });
        })
        // Get City Data
        $("#datalistOptions").change(function () {

            $("#DocId").empty();
            $("#DocId").append("<option>Choose Doctor</option>");

            var DeptId = $("#datalistOptions").val();
            var ShiftId = $("#getShift").val();

            $.ajax({

                type: "POST",
                url: "/Booking/GetDoctorByDepartmentID",
                data: {
                    DeptId: DeptId,
                    ShiftId: ShiftId
                },

                success: function (res) {

                    $.each(res, function (i, e) {
                        $("#DocId").append("<option value='" + e.id + "'>" + e.name + "</option>");
                    });
                }

            });

        });
    </script>
</body>

</html>
